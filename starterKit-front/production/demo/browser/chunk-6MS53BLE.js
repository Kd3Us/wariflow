import{a as ke,b as ie}from"./chunk-WEN37R3V.js";import{$b as c,Bb as ue,Ca as s,Cb as L,Ga as J,Ka as C,Kb as ge,Lb as O,Mb as k,Na as u,Nb as he,Ob as F,R as se,Ta as l,Ub as fe,Vb as ve,W as le,X as w,Xa as t,Ya as i,Yb as xe,Za as p,Zb as Se,_b as N,a as Z,ab as y,ac as A,b as ee,ba as S,bb as g,bc as j,c as ae,ca as b,cb as m,cc as q,da as f,ea as _,ec as x,gc as B,hb as n,hc as be,ib as E,ic as te,jb as v,kb as re,kc as P,lc as G,mc as ye,nc as _e,oc as Ee,pa as $,pc as we,qb as ne,qc as Ce,rc as H,sb as me,tb as ce,tc as U,uc as z,ya as de,za as pe}from"./chunk-YALM3UWZ.js";var D=class{constructor(){this.nom="",this.prenom="",this.sexe="",this.age=0,this.nationalite="",this.origine="",this.description="",this.parcoursUtilisateur=""}},Q=class{constructor(d,e){this.id=e||this.generateId(),this.nom=d.nom,this.prenom=d.prenom,this.sexe=d.sexe,this.age=d.age,this.nationalite=d.nationalite,this.origine=d.origine,this.description=d.description,this.parcoursUtilisateur=d.parcoursUtilisateur,this.dateCreation=new Date}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}};var M=class{constructor(){this.slogan="",this.typography="",this.valeurs="",this.tonMessage="",this.experienceUtilisateur=""}};var Fe=[{id:"innocent",name:"L'Innocent",description:"Optimiste, honn\xEAte, pur"},{id:"sage",name:"Le Sage",description:"Sagesse, connaissance, v\xE9rit\xE9"},{id:"explorer",name:"L'Explorateur",description:"Libert\xE9, aventure, d\xE9couverte"},{id:"outlaw",name:"Le Rebelle",description:"R\xE9volution, changement, disruption"},{id:"magician",name:"Le Magicien",description:"Transformation, vision, innovation"},{id:"hero",name:"Le H\xE9ros",description:"Courage, d\xE9termination, triomphe"},{id:"lover",name:"L'Amoureux",description:"Passion, intimit\xE9, engagement"},{id:"jester",name:"Le Bouffon",description:"Plaisir, humour, spontan\xE9it\xE9"},{id:"everyman",name:"L'Homme du Peuple",description:"Appartenance, r\xE9alisme, empathie"},{id:"caregiver",name:"Le Protecteur",description:"Service, compassion, g\xE9n\xE9rosit\xE9"},{id:"ruler",name:"Le Souverain",description:"Contr\xF4le, responsabilit\xE9, leadership"},{id:"creator",name:"Le Cr\xE9ateur",description:"Cr\xE9ativit\xE9, imagination, expression artistique"}],De=[{id:"marketing",name:"Storytelling Marketing",description:"Structure narrative pour le marketing"},{id:"ux",name:"Storytelling UX",description:"Narration centr\xE9e sur l'exp\xE9rience utilisateur"},{id:"three-acts",name:"Storytelling \xE0 3 actes",description:"Structure classique en trois actes"},{id:"hero-journey",name:"Le Voyage du H\xE9ros",description:"Parcours initiatique du protagoniste"},{id:"problem-solution",name:"Probl\xE8me-Solution",description:"Identification du probl\xE8me et pr\xE9sentation de la solution"}],T=class{constructor(){this.archetypes=[],this.structureNarrative="",this.pitch=""}};var V=class{constructor(){this.market="",this.pricing=""}};var I=(()=>{class o{constructor(e){this.jwtService=e,this.http=w(ve),this.apiUrl=xe.apiWorkspaceURL,this._currentStep=$(1),this._workspaceData=$({personForm:new D,personFormData:{personForms:[],currentPersonForm:new D},visualIdentityForm:new M,storytellingForm:new T,businessModelForm:new V}),this._workspaceId=$(null),this._projectId=$(null),this.currentStep=this._currentStep.asReadonly(),this.workspaceData=this._workspaceData.asReadonly(),this.workspaceId=this._workspaceId.asReadonly(),this.steps=[{id:1,title:"Buyers Persona",completed:!1,active:!0},{id:2,title:"Branding",completed:!1,active:!1},{id:3,title:"Storytelling",completed:!1,active:!1},{id:4,title:"Business Model",completed:!1,active:!1}]}getAuthHeaders(){let e=this.jwtService.getToken();return new fe({"Content-Type":"application/json",Authorization:`Bearer ${e}`})}nextStep(){this._currentStep()<4&&(this._currentStep.update(e=>e+1),this.updateStepStatus())}previousStep(){this._currentStep()>1&&(this._currentStep.update(e=>e-1),this.updateStepStatus())}goToStep(e){e>=1&&e<=4&&(this._currentStep.set(e),this.updateStepStatus())}updateWorkspaceData(e,r){this._workspaceData.update(a=>ee(Z({},a),{[e]:r})),this.saveWorkspaceData().subscribe({next:a=>{this._workspaceId()||this._workspaceId.set(a.id)},error:a=>{console.error("Erreur lors de la sauvegarde du workspace:",a)}})}createWorkspace(e){let r={projectId:e,currentStep:this._currentStep(),personForm:this._workspaceData().personForm,personFormData:this._workspaceData().personFormData,visualIdentityForm:this._workspaceData().visualIdentityForm,storytellingForm:this._workspaceData().storytellingForm,businessModelForm:this._workspaceData().businessModelForm};return this.http.post(this.apiUrl,r,{headers:this.getAuthHeaders()})}saveWorkspaceData(){let e=this._workspaceId(),r={currentStep:this._currentStep(),personForm:this._workspaceData().personForm,personFormData:this._workspaceData().personFormData,visualIdentityForm:this._workspaceData().visualIdentityForm,storytellingForm:this._workspaceData().storytellingForm,businessModelForm:this._workspaceData().businessModelForm};if(e)return this.http.patch(`${this.apiUrl}/${e}`,r,{headers:this.getAuthHeaders()});{let a=this._projectId();return this.createWorkspace(a||void 0)}}getWorkspaceById(e){return this.http.get(`${this.apiUrl}/${e}`,{headers:this.getAuthHeaders()})}getWorkspace(){return this.http.get(`${this.apiUrl}`,{headers:this.getAuthHeaders()})}getAllWorkspaces(){return this.http.get(`${this.apiUrl}/user/me`,{headers:this.getAuthHeaders()})}loadWorkspaceById(e){this.getWorkspaceById(e).subscribe({next:r=>{this._workspaceId.set(r.id),this._projectId.set(r.projectId),this._currentStep.set(r.currentStep||1),this._workspaceData.set({personForm:r.personForm?Object.assign(new D,r.personForm):new D,personFormData:r.personFormData||{personForms:[],currentPersonForm:new D},visualIdentityForm:r.visualIdentityForm?Object.assign(new M,r.visualIdentityForm):new M,storytellingForm:r.storytellingForm?Object.assign(new T,r.storytellingForm):new T,businessModelForm:r.businessModelForm?Object.assign(new V,r.businessModelForm):new V}),this.updateStepStatus()},error:r=>{console.error("Erreur lors du chargement du workspace:",r)}})}loadWorkspaceFromData(e){this._workspaceId.set(e.id),this._projectId.set(e.projectId),this._currentStep.set(e.currentStep||1),this._workspaceData.set({personForm:e.personForm?Object.assign(new D,e.personForm):new D,personFormData:e.personFormData||{personForms:[],currentPersonForm:new D},visualIdentityForm:e.visualIdentityForm?Object.assign(new M,e.visualIdentityForm):new M,storytellingForm:e.storytellingForm?Object.assign(new T,e.storytellingForm):new T,businessModelForm:e.businessModelForm?Object.assign(new V,e.businessModelForm):new V}),this.updateStepStatus()}setProjectId(e){this._projectId.set(e)}updateStepStatus(){let e=this._currentStep();this.steps.forEach(r=>{r.completed=r.id<e,r.active=r.id===e})}getSteps(){return[...this.steps]}static{this.\u0275fac=function(r){return new(r||o)(le(Se))}}static{this.\u0275prov=se({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var je=(o,d)=>({"cursor-pointer hover:bg-gray-50":o,"cursor-not-allowed opacity-60":d}),qe=(o,d)=>({"bg-secondary text-white":o,"bg-gray-200 text-gray-500":d});function Be(o,d){o&1&&p(0,"app-loader")}function Pe(o,d){o&1&&(f(),t(0,"svg",16),p(1,"path",17),i())}function Ge(o,d){if(o&1&&(t(0,"span",18),n(1),i()),o&2){let e=m().$implicit;s(),E(e.id)}}function He(o,d){if(o&1){let e=y();t(0,"div",9),g("click",function(){let a=S(e).$implicit,h=m();return b(h.navigateToStep(a.id))}),t(1,"div",10),u(2,Pe,2,0,"svg",11)(3,Ge,2,1,"span",12),i(),t(4,"div",13)(5,"h3",14),n(6),i(),p(7,"p",15),i()()}if(o&2){let e=d.$implicit,r=m();l("ngClass",ne(6,je,r.canNavigateToStep(e.id),!r.canNavigateToStep(e.id))),s(),l("ngClass",ne(9,qe,e.completed||e.active,!e.completed&&!e.active)),s(),l("ngIf",e.completed),s(),l("ngIf",!e.completed),s(3),E(e.title),s(),l("innerHTML",r.getStepDescription(e.id),de)}}var Ie=(()=>{class o{constructor(e,r){this.loaderService=e,this.workspaceService=r,this.steps=[],this.currentStep=1,this.isLoading$=this.loaderService.isLoading$}getStepDescription(e){return{1:"Cr\xE9er votre fiche personne.",2:"Cr\xE9er votre branding.",3:"Cr\xE9er votre Storytelling.",4:"Cr\xE9er votre business model."}[e]||""}navigateToStep(e){this.canNavigateToStep(e)&&this.workspaceService.goToStep(e)}canNavigateToStep(e){if(e===this.currentStep)return!0;let r=this.workspaceService.workspaceData();switch(e){case 1:return!!(r.personFormData&&r.personFormData.personForms&&r.personFormData.personForms.length>0);case 2:return!!(r.visualIdentityForm&&this.isFormFilled(r.visualIdentityForm));case 3:return!!(r.storytellingForm&&this.isFormFilled(r.storytellingForm));case 4:return!!(r.businessModelForm&&this.isFormFilled(r.businessModelForm));default:return!1}}isFormFilled(e){return e?Object.values(e).some(r=>typeof r=="string"?r.trim().length>0:Array.isArray(r)?r.length>0:typeof r=="object"&&r!==null?Object.keys(r).length>0:r!=null):!1}static{this.\u0275fac=function(r){return new(r||o)(J(ie),J(I))}}static{this.\u0275cmp=C({type:o,selectors:[["app-sidebar"]],inputs:{steps:"steps",currentStep:"currentStep"},decls:13,vars:5,consts:[[4,"ngIf"],[1,"w-80","bg-white","border-r","border-gray-200","min-h-screen"],[1,"p-6"],[1,"mb-6"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"flex","items-center","text-sm","text-gray-600","mb-2"],[1,"text-xs","my-4","text-secondary","font-medium"],[1,"space-y-4"],["class","flex items-start p-2 rounded-lg transition-colors duration-200",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"flex","items-start","p-2","rounded-lg","transition-colors","duration-200",3,"click","ngClass"],[1,"flex-shrink-0","w-8","h-8","rounded-full","flex","items-center","justify-center","mr-3","transition-colors","duration-200",3,"ngClass"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","text-sm font-medium",4,"ngIf"],[1,"flex-1"],[1,"text-sm","font-medium","text-gray-900","mb-1"],[1,"text-xs","text-gray-500",3,"innerHTML"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-sm","font-medium"]],template:function(r,a){r&1&&(u(0,Be,1,0,"app-loader",0),me(1,"async"),t(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),n(6,"M\xE9thodologie Guid\xE9e"),i(),t(7,"div",5),n(8," Outils & templates pour structurer son projet comme un pro. "),i(),t(9,"div",6),n(10),i()(),t(11,"div",7),u(12,He,8,12,"div",8),i()()()),r&2&&(l("ngIf",ce(1,3,a.isLoading$)),s(10),v("Etape ",a.currentStep," sur 4"),s(2),l("ngForOf",a.steps))},dependencies:[F,ge,O,k,he,ke],encapsulation:2})}}return o})();function Ue(o,d){if(o&1&&(t(0,"div")(1,"strong"),n(2,"Nationalit\xE9:"),i(),n(3),i()),o&2){let e=m().$implicit;s(3),v(" ",e.nationalite,"")}}function ze(o,d){if(o&1&&(t(0,"div")(1,"strong"),n(2,"Origine:"),i(),n(3),i()),o&2){let e=m().$implicit;s(3),v(" ",e.origine,"")}}function Re(o,d){if(o&1&&(t(0,"div",55)(1,"strong"),n(2,"Description:"),i(),n(3),i()),o&2){let e=m().$implicit;s(3),v(" ",e.description,"")}}function Oe(o,d){if(o&1){let e=y();t(0,"div",39)(1,"div",40)(2,"div",41)(3,"h3",42),n(4),i(),t(5,"p",43),n(6),i()(),t(7,"div",44)(8,"button",45),g("click",function(){let a=S(e).$implicit,h=m(3);return b(h.editPersonCard(a))}),f(),t(9,"svg",46),p(10,"path",47),i()(),_(),t(11,"button",48),g("click",function(){let a=S(e).$implicit,h=m(3);return b(h.deletePersonCard(a.id))}),f(),t(12,"svg",46),p(13,"path",49),i()()()(),_(),t(14,"div",50),u(15,Ue,4,1,"div",51)(16,ze,4,1,"div",51)(17,Re,4,1,"div",52),i(),t(18,"div",53)(19,"p",54),n(20),i()()()}if(o&2){let e=d.$implicit,r=m(3);s(4),re("",e.prenom," ",e.nom,""),s(2),re("",e.sexe,", ",e.age," ans"),s(9),l("ngIf",e.nationalite),s(),l("ngIf",e.origine),s(),l("ngIf",e.description),s(3),v(" Cr\xE9\xE9 le ",r.formatDate(e.dateCreation)," ")}}function We(o,d){if(o&1&&(t(0,"div",37),u(1,Oe,21,8,"div",38),i()),o&2){let e=m(2);s(),l("ngForOf",e.personCards)("ngForTrackBy",e.trackByCardId)}}function $e(o,d){if(o&1){let e=y();t(0,"div",1)(1,"div",34)(2,"h2",7),n(3),i(),t(4,"button",35),g("click",function(){S(e);let a=m();return b(a.toggleCardsDisplay())}),n(5),i()(),u(6,We,2,2,"div",36),i()}if(o&2){let e=m();s(3),v("Personas cr\xE9\xE9s (",e.personCards.length,")"),s(2),v(" ",e.showCards?"Masquer":"Afficher"," les personas "),s(),l("ngIf",e.showCards)}}function Je(o,d){if(o&1){let e=y();t(0,"button",56),g("click",function(){S(e);let a=m();return b(a.cancelEdit())}),n(1," Annuler "),i()}}function Qe(o,d){o&1&&(t(0,"div",57),n(1," Le nom est requis (minimum 2 caract\xE8res) "),i())}function Ye(o,d){o&1&&(t(0,"div",57),n(1," Le pr\xE9nom est requis (minimum 2 caract\xE8res) "),i())}function Xe(o,d){o&1&&(t(0,"div",57),n(1," Le sexe est requis "),i())}function Ke(o,d){o&1&&(t(0,"div",57),n(1," L'\xE2ge doit \xEAtre entre 16 et 120 ans "),i())}function Ze(o,d){if(o&1){let e=y();t(0,"div",58)(1,"button",59),g("click",function(){S(e);let a=m();return b(a.saveAndContinue())}),n(2," Continuer vers l'\xE9tape suivante "),i()()}}var Me=(()=>{class o{constructor(){this.workspaceService=w(I),this.personCards=[],this.showCards=!0,this.isEditing=!1,this.editingCardId=null,this.profileForm=new q({nom:new x("",[c.required,c.minLength(2)]),prenom:new x("",[c.required,c.minLength(2)]),sexe:new x("",[c.required]),age:new x(null,[c.required,c.min(16),c.max(120)]),nationalite:new x("",[c.required]),origine:new x("",[c.required]),description:new x("",[c.required]),parcoursUtilisateur:new x("",[c.required])}),L(()=>{let e=this.workspaceService.workspaceData();e.personFormData&&this.loadPersonFormData(e.personFormData)})}ngOnInit(){let e=this.workspaceService.workspaceData();e.personFormData&&this.loadPersonFormData(e.personFormData)}loadPersonFormData(e){this.personCards=e.personForms||[],e.currentPersonForm&&this.profileForm.patchValue(e.currentPersonForm)}trackByCardId(e,r){return r.id}toggleCardsDisplay(){this.showCards=!this.showCards}formatDate(e){return new Date(e).toLocaleDateString("fr-FR")}editPersonCard(e){this.isEditing=!0,this.editingCardId=e.id,this.profileForm.patchValue({nom:e.nom,prenom:e.prenom,sexe:e.sexe,age:e.age,nationalite:e.nationalite,origine:e.origine,description:e.description,parcoursUtilisateur:e.parcoursUtilisateur})}cancelEdit(){this.isEditing=!1,this.editingCardId=null,this.resetForm()}deletePersonCard(e){confirm("\xCAtes-vous s\xFBr de vouloir supprimer ce persona ?")&&(this.personCards=this.personCards.filter(r=>r.id!==e),this.updateWorkspaceData())}resetForm(){this.profileForm.reset(),this.profileForm.patchValue({age:null})}savePersonForm(){if(this.profileForm.valid){let e={nom:this.profileForm.value.nom||"",prenom:this.profileForm.value.prenom||"",sexe:this.profileForm.value.sexe||"",age:this.profileForm.value.age||0,nationalite:this.profileForm.value.nationalite||"",origine:this.profileForm.value.origine||"",description:this.profileForm.value.description||"",parcoursUtilisateur:this.profileForm.value.parcoursUtilisateur||""};if(this.isEditing&&this.editingCardId){let r=this.personCards.findIndex(a=>a.id===this.editingCardId);if(r!==-1){let a=new Q(e,this.editingCardId);a.dateCreation=this.personCards[r].dateCreation,this.personCards[r]=a}this.cancelEdit()}else{let r=new Q(e);this.personCards.push(r),this.resetForm()}this.updateWorkspaceData()}}updateWorkspaceData(){let e={nom:this.profileForm.value.nom||"",prenom:this.profileForm.value.prenom||"",sexe:this.profileForm.value.sexe||"",age:this.profileForm.value.age||0,nationalite:this.profileForm.value.nationalite||"",origine:this.profileForm.value.origine||"",description:this.profileForm.value.description||"",parcoursUtilisateur:this.profileForm.value.parcoursUtilisateur||""},r={personForms:this.personCards,currentPersonForm:e};this.workspaceService.updateWorkspaceData("personFormData",r)}saveAndContinue(){this.personCards.length>0&&(this.updateWorkspaceData(),this.workspaceService.nextStep())}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=C({type:o,selectors:[["app-step1"]],decls:78,vars:11,consts:[[1,"animate-fade-in","mb-8"],[1,"mb-8"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],["class","mb-8",4,"ngIf"],[1,"bg-white","border","border-gray-200","rounded-lg","p-6"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold","text-gray-900"],["type","button","class","text-gray-600 hover:text-gray-800 text-sm font-medium",3,"click",4,"ngIf"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-red-500"],["type","text","formControlName","nom","placeholder","Nom de famille","required","",1,"input-field"],["class","text-red-500 text-xs mt-1",4,"ngIf"],["type","text","formControlName","prenom","placeholder","Pr\xE9nom","required","",1,"input-field"],["formControlName","sexe","required","",1,"input-field"],["value",""],["value","Homme"],["value","Femme"],["value","Autre"],["type","number","formControlName","age","placeholder","\xC2ge","min","16","max","120","required","",1,"input-field"],[1,"border-t","pt-6"],[1,"text-lg","font-medium","text-gray-900","mb-4"],["type","text","formControlName","nationalite","placeholder","Nationalit\xE9","required","",1,"input-field"],["type","text","formControlName","origine","placeholder","Origine","required","",1,"input-field"],[1,"mt-6"],["formControlName","description","placeholder","D\xE9crivez ce persona en quelques mots...","rows","4","required","",1,"input-field","resize-none"],["formControlName","parcoursUtilisateur","placeholder","D\xE9crivez le parcours et les exp\xE9riences de ce persona...","rows","4","required","",1,"input-field","resize-none"],[1,"flex","justify-between","items-center","pt-6"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],[1,"flex","space-x-3"],["type","submit",1,"px-4","py-2","text-sm","font-medium","text-white","bg-blue-600","border","border-transparent","rounded-md","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["class","flex justify-end mt-8",4,"ngIf"],[1,"flex","items-center","justify-between","mb-4"],["type","button",1,"text-blue-600","hover:text-blue-800","text-sm","font-medium",3,"click"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4","mb-6"],["class","bg-white border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-white","border","border-gray-200","rounded-lg","p-4","shadow-sm","hover:shadow-md","transition-shadow"],[1,"flex","items-start","justify-between","mb-3"],[1,"flex-1"],[1,"font-semibold","text-gray-900"],[1,"text-sm","text-gray-600"],[1,"flex","space-x-2"],["type","button","title","Modifier",1,"text-blue-600","hover:text-blue-800","text-sm",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["type","button","title","Supprimer",1,"text-red-600","hover:text-red-800","text-sm",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"space-y-2","text-sm","text-gray-600"],[4,"ngIf"],["class","line-clamp-2",4,"ngIf"],[1,"mt-3","pt-3","border-t","border-gray-100"],[1,"text-xs","text-gray-500"],[1,"line-clamp-2"],["type","button",1,"text-gray-600","hover:text-gray-800","text-sm","font-medium",3,"click"],[1,"text-red-500","text-xs","mt-1"],[1,"flex","justify-end","mt-8"],["type","button",1,"btn-primary","rounded-md","text-sm","p-3",3,"click"]],template:function(r,a){if(r&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),n(3,"Fiches Persona"),i(),t(4,"p",3),n(5," Cr\xE9ez plusieurs profils de personas pour mieux comprendre vos utilisateurs cibles. "),i()(),u(6,$e,7,3,"div",4),t(7,"div",5)(8,"div",6)(9,"h2",7),n(10),i(),u(11,Je,2,0,"button",8),i(),t(12,"form",9),g("ngSubmit",function(){return a.savePersonForm()}),t(13,"div",10)(14,"div")(15,"label",11),n(16," Nom "),t(17,"span",12),n(18,"*"),i()(),p(19,"input",13),u(20,Qe,2,0,"div",14),i(),t(21,"div")(22,"label",11),n(23," Pr\xE9nom "),t(24,"span",12),n(25,"*"),i()(),p(26,"input",15),u(27,Ye,2,0,"div",14),i()(),t(28,"div",10)(29,"div")(30,"label",11),n(31," Sexe "),t(32,"span",12),n(33,"*"),i()(),t(34,"select",16)(35,"option",17),n(36,"S\xE9lectionnez le sexe"),i(),t(37,"option",18),n(38,"Homme"),i(),t(39,"option",19),n(40,"Femme"),i(),t(41,"option",20),n(42,"Autre"),i()(),u(43,Xe,2,0,"div",14),i(),t(44,"div")(45,"label",11),n(46," \xC2ge "),t(47,"span",12),n(48,"*"),i()(),p(49,"input",21),u(50,Ke,2,0,"div",14),i()(),t(51,"div",22)(52,"h3",23),n(53,"Informations compl\xE9mentaires"),i(),t(54,"div",10)(55,"div")(56,"label",11),n(57," Nationalit\xE9 "),i(),p(58,"input",24),i(),t(59,"div")(60,"label",11),n(61," Origine "),i(),p(62,"input",25),i()(),t(63,"div",26)(64,"label",11),n(65," Description "),i(),p(66,"textarea",27),i(),t(67,"div",26)(68,"label",11),n(69," Parcours utilisateur "),i(),p(70,"textarea",28),i()(),t(71,"div",29)(72,"button",30),g("click",function(){return a.resetForm()}),n(73," R\xE9initialiser "),i(),t(74,"div",31)(75,"button",32),n(76),i()()()()(),u(77,Ze,3,0,"div",33),i()),r&2){let h,R,X,K;s(6),l("ngIf",a.personCards.length>0),s(4),v(" ",a.isEditing?"Modifier le persona":"Nouveau persona"," "),s(),l("ngIf",a.isEditing),s(),l("formGroup",a.profileForm),s(8),l("ngIf",((h=a.profileForm.get("nom"))==null?null:h.invalid)&&((h=a.profileForm.get("nom"))==null?null:h.touched)),s(7),l("ngIf",((R=a.profileForm.get("prenom"))==null?null:R.invalid)&&((R=a.profileForm.get("prenom"))==null?null:R.touched)),s(16),l("ngIf",((X=a.profileForm.get("sexe"))==null?null:X.invalid)&&((X=a.profileForm.get("sexe"))==null?null:X.touched)),s(7),l("ngIf",((K=a.profileForm.get("age"))==null?null:K.invalid)&&((K=a.profileForm.get("age"))==null?null:K.touched)),s(25),l("disabled",!a.profileForm.valid),s(),v(" ",a.isEditing?"Mettre \xE0 jour":"Ajouter le persona"," "),s(),l("ngIf",a.personCards.length>0)}},dependencies:[F,O,k,U,B,_e,Ee,N,be,ye,A,j,H,Ce,we,z,P,G],encapsulation:2})}}return o})();function et(o,d){if(o&1){let e=y();t(0,"div",50)(1,"div",51)(2,"h3",52),n(3,"Donn\xE9es sauvegard\xE9es sur le backend"),i(),t(4,"button",53),g("click",function(){S(e);let a=m();return b(a.toggleSavedDataDisplay())}),n(5," Masquer "),i()(),t(6,"div",54)(7,"div")(8,"strong"),n(9,"Slogan:"),i(),n(10),i(),t(11,"div")(12,"strong"),n(13,"Typography:"),i(),n(14),i(),t(15,"div")(16,"strong"),n(17,"Exp\xE9rience utilisateur:"),i(),n(18),i()(),t(19,"div",55)(20,"div")(21,"strong"),n(22,"Valeurs:"),i()(),t(23,"p",56),n(24),i()(),t(25,"div",55)(26,"div")(27,"strong"),n(28,"Ton & Message:"),i()(),t(29,"p",56),n(30),i()()()}if(o&2){let e=m();s(10),v(" ",e.savedVisualIdentityData.slogan||"Non renseign\xE9",""),s(4),v(" ",e.savedVisualIdentityData.typography||"Non renseign\xE9",""),s(4),v(" ",e.savedVisualIdentityData.experienceUtilisateur||"Non renseign\xE9",""),s(6),E(e.savedVisualIdentityData.valeurs||"Non renseign\xE9"),s(6),E(e.savedVisualIdentityData.tonMessage||"Non renseign\xE9")}}function tt(o,d){if(o&1){let e=y();t(0,"div",57)(1,"button",58),g("click",function(){S(e);let a=m();return b(a.toggleSavedDataDisplay())}),f(),t(2,"svg",59),p(3,"path",60),i(),_(),t(4,"span"),n(5,"Afficher les donn\xE9es sauvegard\xE9es"),i()()()}}function it(o,d){if(o&1){let e=y();t(0,"div",61)(1,"div",62),p(2,"img",63),t(3,"div",64)(4,"p",65),n(5,"Logo actuel"),i(),t(6,"p",20),n(7,'Cliquez sur "T\xE9l\xE9charger un fichier" pour le remplacer'),i()(),t(8,"button",66),g("click",function(){S(e);let a=m();return b(a.removeLogo())}),n(9," Supprimer "),i()()()}if(o&2){let e=m();s(2),l("src",e.getLogoDataUrl(),pe)}}function rt(o,d){if(o&1&&(t(0,"div",67),n(1),i()),o&2){let e=m();s(),v(" Nouveau fichier s\xE9lectionn\xE9: ",e.selectedLogoName," ")}}function nt(o,d){o&1&&(t(0,"div",68),n(1," Traitement en cours... "),i())}var Te=(()=>{class o{constructor(){this.workspaceService=w(I),this.selectedLogoName="",this.selectedLogoFile=null,this.currentLogoBase64="",this.currentLogoMimeType="",this.isProcessingLogo=!1,this.showSavedData=!1,this.savedVisualIdentityData=null,this.visualIdentityForm=new q({slogan:new x("",[c.required,c.minLength(3)]),typography:new x("",[c.required,c.minLength(2)]),valeurs:new x("",[c.required,c.minLength(10)]),tonMessage:new x("",[c.required,c.minLength(10)]),experienceUtilisateur:new x("",[c.required])}),L(()=>{let e=this.workspaceService.workspaceData();e.visualIdentityForm&&this.loadFormData(e.visualIdentityForm)})}ngOnInit(){let e=this.workspaceService.workspaceData();e.visualIdentityForm&&(this.loadFormData(e.visualIdentityForm),this.updateSavedData(e.visualIdentityForm))}loadFormData(e){this.visualIdentityForm.patchValue({slogan:e.slogan||"",typography:e.typography||"",valeurs:e.valeurs||"",tonMessage:e.tonMessage||"",experienceUtilisateur:e.experienceUtilisateur||""}),e.logoBase64&&(this.currentLogoBase64=e.logoBase64,this.currentLogoMimeType=e.logoMimeType||"")}updateSavedData(e){(e.slogan||e.typography||e.valeurs||e.tonMessage||e.experienceUtilisateur)&&(this.savedVisualIdentityData=e)}toggleSavedDataDisplay(){this.showSavedData=!this.showSavedData}getLogoDataUrl(){return this.currentLogoBase64&&this.currentLogoMimeType?`data:${this.currentLogoMimeType};base64,${this.currentLogoBase64}`:""}onLogoChange(e){let r=e.target.files[0];if(r){if(r.size>10*1024*1024){alert("Le fichier est trop volumineux. Taille maximale : 10MB");return}if(!r.type.startsWith("image/")){alert("Veuillez s\xE9lectionner un fichier image valide");return}this.selectedLogoName=r.name,this.selectedLogoFile=r,this.convertToBase64(r)}}convertToBase64(e){this.isProcessingLogo=!0;let r=new FileReader;r.onload=()=>{let h=r.result.split(",")[1];this.currentLogoBase64=h,this.currentLogoMimeType=e.type,this.isProcessingLogo=!1},r.onerror=()=>{this.isProcessingLogo=!1,alert("Erreur lors de la lecture du fichier")},r.readAsDataURL(e)}removeLogo(){this.currentLogoBase64="",this.currentLogoMimeType="",this.selectedLogoName="",this.selectedLogoFile=null}resetForm(){this.visualIdentityForm.reset(),this.selectedLogoName="",this.selectedLogoFile=null,this.currentLogoBase64="",this.currentLogoMimeType=""}goBack(){this.workspaceService.previousStep()}saveAndContinue(){return ae(this,null,function*(){if(this.visualIdentityForm.valid)try{let e=ee(Z({},this.visualIdentityForm.value),{logoBase64:this.currentLogoBase64,logoMimeType:this.currentLogoMimeType,logo:this.selectedLogoFile});this.workspaceService.updateWorkspaceData("visualIdentityForm",e),this.workspaceService.nextStep()}catch(e){console.error("Erreur lors de la sauvegarde:",e)}})}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=C({type:o,selectors:[["app-step2"]],decls:115,vars:8,consts:[[1,"animate-fade-in"],[1,"mb-8"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],["class","mb-8 p-6 bg-green-50 border border-green-200 rounded-lg",4,"ngIf"],["class","mb-6",4,"ngIf"],[1,"space-y-8",3,"ngSubmit","formGroup"],[1,"border-b","pb-8"],[1,"text-xl","font-semibold","text-gray-900","mb-6"],[1,"space-y-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["class","mb-4 p-4 bg-gray-50 rounded-lg",4,"ngIf"],[1,"mt-1","flex","justify-center","px-6","pt-5","pb-6","border-2","border-gray-300","border-dashed","rounded-md","hover:border-gray-400","transition-colors"],[1,"space-y-1","text-center"],["stroke","currentColor","fill","none","viewBox","0 0 48 48",1,"mx-auto","h-12","w-12","text-gray-400"],["d","M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"flex","text-sm","text-gray-600"],["for","logo-upload",1,"relative","cursor-pointer","bg-white","rounded-md","font-medium","text-blue-600","hover:text-blue-500","focus-within:outline-none","focus-within:ring-2","focus-within:ring-offset-2","focus-within:ring-blue-500"],["id","logo-upload","name","logo-upload","type","file","accept","image/*",1,"sr-only",3,"change"],[1,"pl-1"],[1,"text-xs","text-gray-500"],["class","mt-2 text-sm text-green-600",4,"ngIf"],["class","mt-2 text-sm text-blue-600",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"text-red-500"],["type","text","formControlName","slogan","placeholder","Votre slogan accrocheur","required","",1,"input-field"],["type","text","formControlName","typography","placeholder","Police de caract\xE8res (ex: Arial, Helvetica)","required","",1,"input-field"],["formControlName","valeurs","placeholder","D\xE9crivez les valeurs de votre projet...","rows","3","required","",1,"input-field","resize-none"],["formControlName","tonMessage","placeholder","Quel ton souhaitez-vous adopter ? Quel message v\xE9hiculer ?","rows","3","required","",1,"input-field","resize-none"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],[1,"relative"],["type","radio","id","site-web","formControlName","experienceUtilisateur","value","site-web",1,"peer","sr-only"],["for","site-web",1,"flex","cursor-pointer","rounded-lg","border","bg-white","p-4","shadow-sm","hover:bg-gray-50","peer-checked:border-blue-500","peer-checked:bg-blue-50"],[1,"flex","flex-1","flex-col"],[1,"block","text-sm","font-medium","text-gray-900"],[1,"mt-1","flex","items-center","text-sm","text-gray-500"],["viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-blue-600","opacity-0","peer-checked:opacity-100"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],["type","radio","id","mobile-app","formControlName","experienceUtilisateur","value","mobile-app",1,"peer","sr-only"],["for","mobile-app",1,"flex","cursor-pointer","rounded-lg","border","bg-white","p-4","shadow-sm","hover:bg-gray-50","peer-checked:border-blue-500","peer-checked:bg-blue-50"],["type","radio","id","discord","formControlName","experienceUtilisateur","value","discord",1,"peer","sr-only"],["for","discord",1,"flex","cursor-pointer","rounded-lg","border","bg-white","p-4","shadow-sm","hover:bg-gray-50","peer-checked:border-blue-500","peer-checked:bg-blue-50"],["type","radio","id","autre","formControlName","experienceUtilisateur","value","autre",1,"peer","sr-only"],["for","autre",1,"flex","cursor-pointer","rounded-lg","border","bg-white","p-4","shadow-sm","hover:bg-gray-50","peer-checked:border-blue-500","peer-checked:bg-blue-50"],[1,"flex","justify-between","pt-6","pb-8"],["type","button",1,"flex","items-center","space-x-2","px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2","fill-current"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"flex","space-x-4"],["type","submit",1,"btn-primary","disabled:opacity-50","disabled:cursor-not-allowed","rounded-md","text-sm","p-2",3,"disabled"],[1,"mb-8","p-6","bg-green-50","border","border-green-200","rounded-lg"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-green-800"],["type","button",1,"text-green-600","hover:text-green-800","text-sm","font-medium",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","text-sm"],[1,"mt-4","text-sm"],[1,"mt-1","text-gray-700"],[1,"mb-6"],["type","button",1,"flex","items-center","space-x-2","px-4","py-2","text-sm","font-medium","text-green-700","bg-green-100","border","border-green-300","rounded-md","hover:bg-green-200","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-green-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"mb-4","p-4","bg-gray-50","rounded-lg"],[1,"flex","items-center","space-x-4"],["alt","Logo actuel",1,"h-16","w-16","object-contain","rounded-md","border",3,"src"],[1,"flex-1"],[1,"text-sm","font-medium","text-gray-900"],["type","button",1,"text-red-600","hover:text-red-800","text-sm",3,"click"],[1,"mt-2","text-sm","text-green-600"],[1,"mt-2","text-sm","text-blue-600"]],template:function(r,a){r&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),n(3,"Identit\xE9 Visuelle & Exp\xE9rience"),i(),t(4,"p",3),n(5," D\xE9finissez l'identit\xE9 visuelle de votre projet et l'exp\xE9rience utilisateur souhait\xE9e. "),i()(),u(6,et,31,5,"div",4)(7,tt,6,0,"div",5),t(8,"form",6),g("ngSubmit",function(){return a.saveAndContinue()}),t(9,"div",7)(10,"h2",8),n(11,"Identit\xE9s Visuelles"),i(),t(12,"div",9)(13,"div")(14,"label",10),n(15," Logo "),i(),u(16,it,10,1,"div",11),t(17,"div",12)(18,"div",13),f(),t(19,"svg",14),p(20,"path",15),i(),_(),t(21,"div",16)(22,"label",17)(23,"span"),n(24),i(),t(25,"input",18),g("change",function(R){return a.onLogoChange(R)}),i()(),t(26,"p",19),n(27,"ou glisser-d\xE9poser"),i()(),t(28,"p",20),n(29,"PNG, JPG, GIF jusqu'\xE0 10MB"),i(),u(30,rt,2,1,"div",21)(31,nt,2,0,"div",22),i()()(),t(32,"div",23)(33,"div")(34,"label",10),n(35," Slogan "),t(36,"span",24),n(37,"*"),i()(),p(38,"input",25),i(),t(39,"div")(40,"label",10),n(41," Typography "),t(42,"span",24),n(43,"*"),i()(),p(44,"input",26),i()(),t(45,"div")(46,"label",10),n(47," Valeurs "),t(48,"span",24),n(49,"*"),i()(),p(50,"textarea",27),i(),t(51,"div")(52,"label",10),n(53," Ton & Message "),t(54,"span",24),n(55,"*"),i()(),p(56,"textarea",28),i()()(),t(57,"div")(58,"h2",8),n(59,"Exp\xE9rience utilisateur"),i(),t(60,"div")(61,"label",10),n(62," Type de plateforme "),t(63,"span",24),n(64,"*"),i()(),t(65,"div",29)(66,"div",30),p(67,"input",31),t(68,"label",32)(69,"span",33)(70,"span",34),n(71,"Site web"),i(),t(72,"span",35),n(73,"Application web"),i()(),f(),t(74,"svg",36),p(75,"path",37),i()()(),_(),t(76,"div",30),p(77,"input",38),t(78,"label",39)(79,"span",33)(80,"span",34),n(81,"Mobile App"),i(),t(82,"span",35),n(83,"Application mobile"),i()(),f(),t(84,"svg",36),p(85,"path",37),i()()(),_(),t(86,"div",30),p(87,"input",40),t(88,"label",41)(89,"span",33)(90,"span",34),n(91,"Discord"),i(),t(92,"span",35),n(93,"Bot Discord"),i()(),f(),t(94,"svg",36),p(95,"path",37),i()()(),_(),t(96,"div",30),p(97,"input",42),t(98,"label",43)(99,"span",33)(100,"span",34),n(101,"Autre"),i(),t(102,"span",35),n(103,"Autre plateforme"),i()(),f(),t(104,"svg",36),p(105,"path",37),i()()()()()(),_(),t(106,"div",44)(107,"button",45),g("click",function(){return a.goBack()}),f(),t(108,"svg",46),p(109,"path",47),i(),_(),t(110,"span"),n(111,"Retour"),i()(),t(112,"div",48)(113,"button",49),n(114," Enregistrer et continuer "),i()()()()()),r&2&&(s(6),l("ngIf",a.showSavedData&&a.savedVisualIdentityData),s(),l("ngIf",!a.showSavedData&&a.savedVisualIdentityData),s(),l("formGroup",a.visualIdentityForm),s(8),l("ngIf",a.currentLogoBase64&&!a.selectedLogoFile),s(8),E(a.currentLogoBase64?"Remplacer le logo":"T\xE9l\xE9charger un fichier"),s(6),l("ngIf",a.selectedLogoName),s(),l("ngIf",a.isProcessingLogo),s(82),l("disabled",!a.visualIdentityForm.valid))},dependencies:[F,k,U,B,N,te,A,j,H,z,P,G],encapsulation:2})}}return o})();function ot(o,d){if(o&1&&(t(0,"span",36),n(1),i()),o&2){let e=d.$implicit,r=m(3);s(),v(" ",r.getArchetypeName(e)," ")}}function at(o,d){if(o&1&&(t(0,"div",32)(1,"div")(2,"strong"),n(3,"Arch\xE9types:"),i()(),t(4,"div",34),u(5,ot,2,1,"span",35),i()()),o&2){let e=m(2);s(5),l("ngForOf",e.savedStorytellingData.archetypes)}}function st(o,d){if(o&1){let e=y();t(0,"div",26)(1,"div",27)(2,"h3",28),n(3,"Donn\xE9es sauvegard\xE9es sur le backend"),i(),t(4,"button",29),g("click",function(){S(e);let a=m();return b(a.toggleSavedDataDisplay())}),n(5," Masquer "),i()(),t(6,"div",30)(7,"div")(8,"strong"),n(9,"Structure narrative:"),i(),n(10),i(),t(11,"div")(12,"strong"),n(13,"Arch\xE9types s\xE9lectionn\xE9s:"),i(),n(14),i()(),u(15,at,6,1,"div",31),t(16,"div",32)(17,"div")(18,"strong"),n(19,"Pitch:"),i()(),t(20,"p",33),n(21),i()()()}if(o&2){let e=m();s(10),v(" ",e.getStructureName(e.savedStorytellingData.structureNarrative)||"Non renseign\xE9",""),s(4),v(" ",e.savedStorytellingData.archetypes.length||0,"/3"),s(),l("ngIf",e.savedStorytellingData.archetypes&&e.savedStorytellingData.archetypes.length>0),s(6),E(e.savedStorytellingData.pitch||"Non renseign\xE9")}}function lt(o,d){if(o&1){let e=y();t(0,"div",37)(1,"button",38),g("click",function(){S(e);let a=m();return b(a.toggleSavedDataDisplay())}),f(),t(2,"svg",39),p(3,"path",40),i(),_(),t(4,"span"),n(5,"Afficher les donn\xE9es sauvegard\xE9es"),i()()()}}function dt(o,d){if(o&1){let e=y();t(0,"div",41)(1,"input",42),g("change",function(a){S(e);let h=m();return b(h.onArchetypeChange(a))}),i(),t(2,"label",43)(3,"div",44)(4,"span",45),n(5),i(),t(6,"span",46),n(7),i()(),f(),t(8,"svg",47),p(9,"path",48),i()()()}if(o&2){let e=d.$implicit,r=m();s(),l("id",e.id)("value",e.id)("disabled",r.selectedArchetypes.length>=3&&!r.isArchetypeSelected(e.id)),s(),l("for",e.id),s(3),E(e.name),s(2),E(e.description)}}function pt(o,d){if(o&1){let e=y();t(0,"span",51),n(1),t(2,"button",52),g("click",function(){let a=S(e).$implicit,h=m(2);return b(h.removeArchetype(a))}),f(),t(3,"svg",53),p(4,"path",54),i()()()}if(o&2){let e=d.$implicit,r=m(2);s(),v(" ",r.getArchetypeName(e)," ")}}function mt(o,d){if(o&1&&(t(0,"div",49),u(1,pt,5,1,"span",50),i()),o&2){let e=m();s(),l("ngForOf",e.selectedArchetypes)}}function ct(o,d){if(o&1&&(t(0,"div",41),p(1,"input",55),t(2,"label",56)(3,"div",44)(4,"span",45),n(5),i(),t(6,"span",57),n(7),i()(),f(),t(8,"svg",47),p(9,"path",48),i()()()),o&2){let e=d.$implicit;s(),l("id",e.id)("value",e.id),s(),l("for",e.id),s(3),E(e.name),s(2),E(e.description)}}var Ve=(()=>{class o{constructor(){this.workspaceService=w(I),this.archetypes=Fe,this.narrativeStructures=De,this.selectedArchetypes=[],this.showSavedData=!1,this.savedStorytellingData=null,this.storytellingForm=new q({structureNarrative:new x("",[c.required]),pitch:new x("",[c.required,c.minLength(50)])}),L(()=>{let e=this.workspaceService.workspaceData();e.storytellingForm&&this.loadFormData(e.storytellingForm)})}ngOnInit(){let e=this.workspaceService.workspaceData();e.storytellingForm&&(this.loadFormData(e.storytellingForm),this.updateSavedData(e.storytellingForm))}loadFormData(e){this.storytellingForm.patchValue({structureNarrative:e.structureNarrative||"",pitch:e.pitch||""}),e.archetypes&&(this.selectedArchetypes=[...e.archetypes],e.archetypes.forEach(r=>{let a=document.getElementById(r);a&&(a.checked=!0)}))}updateSavedData(e){(e.structureNarrative||e.pitch||e.archetypes&&e.archetypes.length>0)&&(this.savedStorytellingData=e)}toggleSavedDataDisplay(){this.showSavedData=!this.showSavedData}getStructureName(e){let r=this.narrativeStructures.find(a=>a.id===e);return r?r.name:e}onArchetypeChange(e){let r=e.target.value;e.target.checked?this.selectedArchetypes.length<3?this.selectedArchetypes.push(r):e.target.checked=!1:this.selectedArchetypes=this.selectedArchetypes.filter(h=>h!==r)}isArchetypeSelected(e){return this.selectedArchetypes.includes(e)}getArchetypeName(e){let r=this.archetypes.find(a=>a.id===e);return r?r.name:e}removeArchetype(e){this.selectedArchetypes=this.selectedArchetypes.filter(a=>a!==e);let r=document.getElementById(e);r&&(r.checked=!1)}resetForm(){this.storytellingForm.reset(),this.selectedArchetypes=[],this.archetypes.forEach(e=>{let r=document.getElementById(e.id);r&&(r.checked=!1)})}goBack(){this.workspaceService.previousStep()}saveAndContinue(){if(this.storytellingForm.valid&&this.selectedArchetypes.length>0){let e={archetypes:this.selectedArchetypes,structureNarrative:this.storytellingForm.value.structureNarrative,pitch:this.storytellingForm.value.pitch};this.workspaceService.updateWorkspaceData("storytellingForm",e),this.workspaceService.nextStep()}}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=C({type:o,selectors:[["app-step3"]],decls:47,vars:8,consts:[[1,"animate-fade-in"],[1,"mb-8"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],["class","mb-8 p-6 bg-green-50 border border-green-200 rounded-lg",4,"ngIf"],["class","mb-6",4,"ngIf"],[1,"space-y-8",3,"ngSubmit","formGroup"],[1,"border-b","pb-8"],[1,"text-xl","font-semibold","text-gray-900","mb-6"],[1,"text-sm","text-gray-600","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["class","relative",4,"ngFor","ngForOf"],[1,"mt-4","text-sm","text-gray-600"],[1,"font-medium"],["class","mt-2",4,"ngIf"],[1,"space-y-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-red-500"],["formControlName","pitch","placeholder","R\xE9digez votre pitch en quelques phrases percutantes. Pr\xE9sentez votre projet, sa valeur unique et pourquoi il est important...","rows","6","required","",1,"input-field","resize-none"],[1,"mt-2","text-sm","text-gray-500"],[1,"flex","justify-between","pt-6","pb-8"],["type","button",1,"flex","items-center","space-x-2","px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-md","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2","fill-current"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"flex","space-x-4"],["type","submit",1,"btn-primary","disabled:opacity-50","disabled:cursor-not-allowed","rounded-md","text-sm","p-2",3,"disabled"],[1,"mb-8","p-6","bg-green-50","border","border-green-200","rounded-lg"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-green-800"],["type","button",1,"text-green-600","hover:text-green-800","text-sm","font-medium",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","text-sm"],["class","mt-4 text-sm",4,"ngIf"],[1,"mt-4","text-sm"],[1,"mt-1","text-gray-700"],[1,"mt-1","flex","flex-wrap","gap-2"],["class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",4,"ngFor","ngForOf"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800"],[1,"mb-6"],["type","button",1,"flex","items-center","space-x-2","px-4","py-2","text-sm","font-medium","text-green-700","bg-green-100","border","border-green-300","rounded-md","hover:bg-green-200","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-green-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"relative"],["type","checkbox",1,"peer","sr-only",3,"change","id","value","disabled"],[1,"flex","cursor-pointer","rounded-lg","border","bg-white","p-4","shadow-sm","hover:bg-gray-50","peer-checked:border-blue-500","peer-checked:bg-blue-50","peer-disabled:opacity-50","peer-disabled:cursor-not-allowed",3,"for"],[1,"flex","flex-1","flex-col"],[1,"block","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-xs","text-gray-500"],["viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-blue-600","opacity-0","peer-checked:opacity-100"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"mt-2"],["class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",4,"ngFor","ngForOf"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800","mr-2"],["type","button",1,"ml-1","text-blue-600","hover:text-blue-800",3,"click"],["fill","currentColor","viewBox","0 0 20 20",1,"h-3","w-3"],["fill-rule","evenodd","d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule","evenodd"],["type","radio","formControlName","structureNarrative",1,"peer","sr-only",3,"id","value"],[1,"flex","cursor-pointer","rounded-lg","border","bg-white","p-4","shadow-sm","hover:bg-gray-50","peer-checked:border-blue-500","peer-checked:bg-blue-50",3,"for"],[1,"mt-1","text-sm","text-gray-500"]],template:function(r,a){r&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),n(3,"Storytelling"),i(),t(4,"p",3),n(5," D\xE9finissez votre strat\xE9gie narrative et cr\xE9ez un storytelling captivant pour votre projet. "),i()(),u(6,st,22,4,"div",4)(7,lt,6,0,"div",5),t(8,"form",6),g("ngSubmit",function(){return a.saveAndContinue()}),t(9,"div",7)(10,"h2",8),n(11,"Arch\xE9types"),i(),t(12,"p",9),n(13,"S\xE9lectionnez jusqu'\xE0 3 arch\xE9types qui correspondent \xE0 votre marque ou projet."),i(),t(14,"div",10),u(15,dt,10,6,"div",11),i(),t(16,"div",12)(17,"span",13),n(18),i(),u(19,mt,2,1,"div",14),i()(),t(20,"div",7)(21,"h2",8),n(22,"Structure Narrative du pitch"),i(),t(23,"p",9),n(24,"Choisissez la structure narrative qui convient le mieux \xE0 votre storytelling."),i(),t(25,"div",15),u(26,ct,10,5,"div",11),i()(),t(27,"div")(28,"h2",8),n(29,"Pitch"),i(),t(30,"div")(31,"label",16),n(32," Votre Pitch "),t(33,"span",17),n(34,"*"),i()(),p(35,"textarea",18),t(36,"p",19),n(37," Un bon pitch doit \xEAtre clair, concis et captivant. Il doit expliquer ce que vous faites, pour qui, et pourquoi c'est important. "),i()()(),t(38,"div",20)(39,"button",21),g("click",function(){return a.goBack()}),f(),t(40,"svg",22),p(41,"path",23),i(),_(),t(42,"span"),n(43,"Retour"),i()(),t(44,"div",24)(45,"button",25),n(46," Enregistrer et continuer "),i()()()()()),r&2&&(s(6),l("ngIf",a.showSavedData&&a.savedStorytellingData),s(),l("ngIf",!a.showSavedData&&a.savedStorytellingData),s(),l("formGroup",a.storytellingForm),s(7),l("ngForOf",a.archetypes),s(3),v("S\xE9lectionn\xE9s: ",a.selectedArchetypes.length,"/3"),s(),l("ngIf",a.selectedArchetypes.length>0),s(7),l("ngForOf",a.narrativeStructures),s(19),l("disabled",!a.storytellingForm.valid||a.selectedArchetypes.length===0))},dependencies:[F,O,k,U,B,N,te,A,j,H,z,P,G],encapsulation:2})}}return o})();function ut(o,d){if(o&1){let e=y();t(0,"div",19)(1,"div",20)(2,"h3",21),n(3,"Donn\xE9es sauvegard\xE9es sur le backend"),i(),t(4,"button",22),g("click",function(){S(e);let a=m();return b(a.toggleSavedDataDisplay())}),n(5," Masquer "),i()(),t(6,"div",23)(7,"div")(8,"strong"),n(9,"Market:"),i()(),t(10,"p",24),n(11),i()(),t(12,"div",23)(13,"div")(14,"strong"),n(15,"Pricing:"),i()(),t(16,"p",24),n(17),i()()()}if(o&2){let e=m();s(11),E(e.savedBusinessModelData.market||"Non renseign\xE9"),s(6),E(e.savedBusinessModelData.pricing||"Non renseign\xE9")}}function gt(o,d){if(o&1){let e=y();t(0,"div",25)(1,"button",26),g("click",function(){S(e);let a=m();return b(a.toggleSavedDataDisplay())}),f(),t(2,"svg",27),p(3,"path",28),i(),_(),t(4,"span"),n(5,"Afficher les donn\xE9es sauvegard\xE9es"),i()()()}}var Le=(()=>{class o{constructor(){this.workspaceService=w(I),this.showSavedData=!1,this.savedBusinessModelData=null,this.businessModelForm=new q({market:new x("",[c.required,c.minLength(10)]),pricing:new x("",[c.required,c.minLength(10)])}),L(()=>{let e=this.workspaceService.workspaceData();e.businessModelForm&&this.loadFormData(e.businessModelForm)})}ngOnInit(){let e=this.workspaceService.workspaceData();e.businessModelForm&&(this.loadFormData(e.businessModelForm),this.updateSavedData(e.businessModelForm))}loadFormData(e){this.businessModelForm.patchValue({market:e.market||"",pricing:e.pricing||""})}updateSavedData(e){(e.market||e.pricing)&&(this.savedBusinessModelData=e)}toggleSavedDataDisplay(){this.showSavedData=!this.showSavedData}goBack(){this.workspaceService.previousStep()}processAndSetup(){this.businessModelForm.valid&&(this.workspaceService.updateWorkspaceData("businessModelForm",this.businessModelForm.value),console.log("Workspace setup completed!",this.workspaceService.workspaceData()))}resetForm(){this.businessModelForm.reset()}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275cmp=C({type:o,selectors:[["app-step4"]],decls:37,vars:4,consts:[[1,"animate-fade-in"],[1,"mb-8"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],["class","mb-8 p-6 bg-green-50 border border-green-200 rounded-lg",4,"ngIf"],["class","mb-6",4,"ngIf"],[1,"space-y-8",3,"ngSubmit","formGroup"],[1,"text-xl","font-semibold","text-gray-900","mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"text-red-500"],["formControlName","market","placeholder","R\xE9digez votre market...","rows","6","required","",1,"input-field","resize-none"],[1,"text-xl","font-semibold","text-gray-900","my-6"],["formControlName","pricing","placeholder","R\xE9digez votre pricing...","rows","6","required","",1,"input-field","resize-none"],[1,"flex","justify-between","pt-6","pb-8"],["type","button",1,"flex","items-center","space-x-2","px-4","py-2","text-sm","font-medium","text-gray-700","btn-secondary","rounded-md","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2","fill-current"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"flex","space-x-4"],["type","submit",1,"btn-primary","disabled:opacity-50","disabled:cursor-not-allowed","rounded-md","text-sm","p-2",3,"disabled"],[1,"mb-8","p-6","bg-green-50","border","border-green-200","rounded-lg"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-green-800"],["type","button",1,"text-green-600","hover:text-green-800","text-sm","font-medium",3,"click"],[1,"mt-4","text-sm"],[1,"mt-1","text-gray-700"],[1,"mb-6"],["type","button",1,"flex","items-center","space-x-2","px-4","py-2","text-sm","font-medium","text-green-700","bg-green-100","border","border-green-300","rounded-md","hover:bg-green-200","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-green-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"]],template:function(r,a){r&1&&(t(0,"div",0)(1,"div",1)(2,"h1",2),n(3,"Businesss model"),i(),t(4,"p",3),n(5," Formaliser ton business model, c'est poser les bases solides de ton activit\xE9. En quelques minutes, clarifie ton offre, ton public cible et ta strat\xE9gie. C'est simple, rapide et essentiel pour faire grandir ton id\xE9e. "),i()(),u(6,ut,18,2,"div",4)(7,gt,6,0,"div",5),t(8,"form",6),g("ngSubmit",function(){return a.processAndSetup()}),t(9,"div",1)(10,"div")(11,"h2",7),n(12,"Market"),i(),t(13,"div")(14,"label",8),n(15," Analyse du march\xE9 "),t(16,"span",9),n(17,"*"),i()(),p(18,"textarea",10),i()(),t(19,"div")(20,"h2",11),n(21,"Pricing"),i(),t(22,"div")(23,"label",8),n(24," Votre Pricing "),t(25,"span",9),n(26,"*"),i()(),p(27,"textarea",12),i()()(),t(28,"div",13)(29,"button",14),g("click",function(){return a.goBack()}),f(),t(30,"svg",15),p(31,"path",16),i(),_(),t(32,"span"),n(33,"Retour"),i()(),t(34,"div",17)(35,"button",18),n(36," Enregistrer et continuer "),i()()()()()),r&2&&(s(6),l("ngIf",a.showSavedData&&a.savedBusinessModelData),s(),l("ngIf",!a.showSavedData&&a.savedBusinessModelData),s(),l("formGroup",a.businessModelForm),s(27),l("disabled",!a.businessModelForm.valid))},dependencies:[F,k,U,B,N,A,j,H,z,P,G],encapsulation:2})}}return o})();function ht(o,d){o&1&&p(0,"app-step1")}function ft(o,d){o&1&&p(0,"app-step2")}function vt(o,d){o&1&&p(0,"app-step3")}function xt(o,d){o&1&&p(0,"app-step4")}var wi=(()=>{class o{constructor(e){this.loaderService=e,this.workspaceService=w(I),this.currentStep=this.workspaceService.currentStep,this.steps=ue(()=>this.workspaceService.getSteps())}ngOnInit(){this.loaderService.startLoading(),this.workspaceService.getAllWorkspaces().subscribe({next:e=>{if(e&&e.length>0){let r=e[0];this.workspaceService.loadWorkspaceFromData(r)}else this.workspaceService.createWorkspace().subscribe({next:r=>{console.log("Nouveau workspace cr\xE9\xE9:",r),this.workspaceService.loadWorkspaceFromData(r)},error:r=>{console.error("Erreur lors de la cr\xE9ation du workspace:",r)}});this.loaderService.stopLoading()},error:e=>{console.error("Erreur lors de la r\xE9cup\xE9ration des workspaces:",e),this.workspaceService.createWorkspace().subscribe({next:r=>{console.log("Nouveau workspace cr\xE9\xE9 apr\xE8s erreur:",r),this.workspaceService.loadWorkspaceFromData(r)},error:r=>{console.error("Erreur lors de la cr\xE9ation du workspace:",r)}}),this.loaderService.stopLoading()}})}static{this.\u0275fac=function(r){return new(r||o)(J(ie))}}static{this.\u0275cmp=C({type:o,selectors:[["app-methodology"]],decls:9,vars:6,consts:[[1,"min-h-screen","bg-gray-50"],[1,"flex","h-screen"],[3,"steps","currentStep"],[1,"flex-1","overflow-y-auto"],[1,"max-w-4xl","mx-auto","p-8","pb-16"],[4,"ngIf"]],template:function(r,a){r&1&&(t(0,"div",0)(1,"div",1),p(2,"app-sidebar",2),t(3,"main",3)(4,"div",4),u(5,ht,1,0,"app-step1",5)(6,ft,1,0,"app-step2",5)(7,vt,1,0,"app-step3",5)(8,xt,1,0,"app-step4",5),i()()()()),r&2&&(s(2),l("steps",a.steps())("currentStep",a.currentStep()),s(3),l("ngIf",a.currentStep()===1),s(),l("ngIf",a.currentStep()===2),s(),l("ngIf",a.currentStep()===3),s(),l("ngIf",a.currentStep()===4))},dependencies:[F,k,Ie,Me,Te,Ve,Le],encapsulation:2})}}return o})();export{wi as MethodologyComponent};
